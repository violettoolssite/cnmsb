#!/usr/bin/make -f

export CARGO_HOME=$(CURDIR)/debian/cargo_home

%:
	dh $@

override_dh_auto_build:
	cargo build --release

override_dh_auto_install:
	mkdir -p debian/cnmsb/usr/bin
	mkdir -p debian/cnmsb/usr/share/cnmsb
	mkdir -p debian/cnmsb/etc/profile.d
	cp -f target/release/cnmsb debian/cnmsb/usr/bin/
	cp -f shell/cnmsb.zsh debian/cnmsb/usr/share/cnmsb/
	cp -f shell/cnmsb.bash debian/cnmsb/usr/share/cnmsb/
	cp -f debian/cnmsb.sh debian/cnmsb/etc/profile.d/

override_dh_auto_clean:
	cargo clean || true
	rm -rf debian/cargo_home

override_dh_auto_test:
	@echo "Skip tests"
